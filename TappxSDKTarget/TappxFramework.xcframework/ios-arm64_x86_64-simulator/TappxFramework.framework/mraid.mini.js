!function(){var e=window.mraid={},t=e.VERSIONS={UNKNOWN:"unknown",V1:"1.0",V2:"2.0",V3:"3.0"},i=e.PLACEMENTS={UNKNOWN:"unknown",INLINE:"inline",INTERSTITIAL:"interstitial"},n=e.STATES={LOADING:"loading",DEFAULT:"default",EXPANDED:"expanded",RESIZED:"resized",HIDDEN:"hidden"},r=e.EVENTS={READY:"ready",SIZE_CHANGE:"sizeChange",STATE_CHANGE:"stateChange",VIEWABLE_CHANGE:"viewableChange",AUDIO_VOLUME_CHANGE:"audioVolumeChange",EXPOSURE_CHANGE:"exposureChange",ERROR:"error"},o=(e.FEATURES={SMS:"sms",TEL:"tel",STORE_PICTURE:"storePicture",INLINE_VIDEO:"inlineVideo",CALENDAR:"calendar",VPAID:"vpaid",LOCATION:"location"},e.POSITIONS={CENTER:"center",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right"}),s=e.ORIENTATIONS={PORTRAIT:"portrait",LANDSCAPE:"landscape",NONE:"none"},a=e.NATIVE_ENDPOINTS={EXPAND:"expand",OPEN:"open",PLAY_VIDEO:"playVideo",RESIZE:"resize",STORE_PICTURE:"storePicture",CREATE_CALENDAR_EVENT:"createCalendarEvent",SET_ORIENTATION_PROPERTIES:"setOrientationProperties",SET_RESIZE_PROPERTIES:"setResizeProperties",SET_EXPAND_PROPERTIES:"setExpandProperties",SET_CURRENT_APP_ORIENTATION:"setCurrentAppOrientation",SET_LOCATION:"setLocation",CLOSE:"close",UNLOAD:"unload",MRAID_LOG:"mraidLog"},E=[],f=[],c=n.LOADING,u=i.UNKNOWN,O=t.UNKNOWN,d=!1,p={allowOrientationChange:!0,forceOrientation:s.NONE},N={width:0,height:0,useCustomClose:!1,isModal:!0},l={width:0,height:0,offsetX:void 0,offsetY:void 0,customClosePosition:o.TOP_RIGHT,allowOffscreen:!0},g={orientation:s.UNKNOWN,locked:!1},h={lat:void 0,lon:void 0,type:void 0,accuracy:void 0,lastfix:void 0,ipservice:void 0},P={x:0,y:0,height:50,width:50},T={x:0,y:0,height:50,width:50},S={x:0,y:0,height:0,width:0},R={x:0,y:0,height:0,width:0};function A(e,t){var i=document.createElement("IFRAME"),n=null!=t?"?args="+encodeURIComponent(t):"";i.setAttribute("src","mraid://"+e+n),document.documentElement.appendChild(i),i.parentNode.removeChild(i),i=null}function I(e,t,i){switch(e){case"setOrientationProperties":i.forceOrientation&&Object.keys(s).indexOf(i.forceOrientation.toUpperCase())<0&&v(e+" - property (forceOrientation) invalid value. "+i.forceOrientation,!0),!0===g.locked&&(i.forceOrientation=s.UNKNOWN);break;case"setExpandProperties":case"setCurrentAppOrientation":break;case"setResizeProperties":i.width=parseInt(i.width),i.height=parseInt(i.height),i.offsetX=parseInt(i.offsetX),i.offsetY=parseInt(i.offsetY),isNaN(i.width)?v(e+" - property (width) must be an integer, and is required.",!0):i.width<50&&v(e+" - property (width) must be at least 50 dp.",!0),isNaN(i.height)?v(e+" - property (height) must be an integer, and is required.",!0):i.height<50&&v(e+" - property (height) must be at least 50 dp.",!0),isNaN(i.offsetX)&&v(e+" - property (offsetX) must be an integer, and is required.",!0),isNaN(i.offsetY)&&v(e+" - property (offsetY) must be an integer, and is required.",!0),isNaN(i.allowOffscreen)&&(i.width>R.width||i.height>R.height)&&v(e+' - cannot set the width or height greater than screensize if "allowOffscreen" is false',!0),!0===i.customClosePosition&&Object.values(o).indexOf(i.customClosePosition)<0&&v(e+' - property (customClosePosition) invalid value.  Default is "top-right"',!0)}for(var n in i)i.hasOwnProperty(n)&&void 0!==i[n]&&(t.hasOwnProperty(n)?t[n]=i[n]:v(e+" - property ("+n+") does not exist."))}function C(t){e.log(t)}function _(t){t="WARN -- "+t,e.log(t)}function v(t,i){if(t="ERROR -- "+t,e.log(t),i)throw new Error("mraid.js::"+t)}e.addEventListener=function(e,t){E.containsListener(e,t)?_("addEventListener - this function already registered for ("+e+") event."):(C("addEventListener (event = "+e+")"),E[e]=E[e]||[],E[e].push(t))},e.removeEventListener=function(e,t){E.removeListener(e,t)},e.createCalendarEvent=function(e){C("createCalendarEvent"),A(a.CREATE_CALENDAR_EVENT,JSON.stringify(e))},e.close=function(){C("close"),A(a.CLOSE)},e.unload=function(){C("unload"),A(a.UNLOAD)},e.expand=function(e){c===n.DEFAULT||c===n.RESIZED?(C("expand"),A(a.EXPAND,e)):_("expand called while in invalid state.")},e.getCurrentAppOrientation=function(){return C("getCurrentAppOrientation"),g},e.getCurrentPosition=function(){return C("getCurrentPosition"),T},e.getDefaultPosition=function(){return C("getDefaultPosition"),P},e.getExpandProperties=function(){return C("getExpandProperties"),N},e.getMaxSize=function(){return C("getMaxSize"),S},e.getOrientationProperties=function(){return C("getOrientationProperties"),p},e.getPlacementType=function(){return C("getPlacementType"),u},e.getResizeProperties=function(){return C("getResizeProperties"),l},e.getScreenSize=function(){return C("getScreenSize"),R},e.getState=function(){return C("getState (state = "+c+")"),c},e.getVersion=function(){return C("getVersion"),O},e.isViewable=function(){return C("isViewable - "+d),d},e.open=function(e){C("open"),A(a.OPEN,e)},e.getLocation=function(){return C("getLocation"),h},e.playVideo=function(e){C("playVideo"),A(a.PLAY_VIDEO,e)},e.resize=function(){if(C("resize - "+JSON.stringify(l)),c==n.EXPANDED&&v("Resize called while in expanded state.",!0),!0===l.allowOffscreen){var t=l.customClosePosition||"top-right",i=T,r=!0;if(t.indexOf("right")>=0){var o=i.x+l.width+l.offsetX>R.width-50,s=i.x+l.width+l.offsetX<50;(o||s)&&(r=!1)}if(t.indexOf("left")>=0){o=i.x+l.offsetX<0,s=i.x+l.offsetX>R.width-50;(o||s)&&(r=!1)}if(t.indexOf("top")>=0){e.log(JSON.stringify(T),!0),e.log(JSON.stringify(l),!0);var E=i.y+l.offsetY<0,f=i.y+l.offsetY>R.height-50;(E||f)&&(r=!1)}if(t.indexOf("bottom")>=0){E=i.y+l.height+l.offsetY<50,f=i.y+l.height+l.offsetY>R.height-50;(E||f)&&(r=!1)}r||v("Current resize properties would result in the close region being off screen. Ignoring resize.",!0)}l.width&&l.height?A(a.RESIZE):v("Resize properties must be set before calling mraid.resize()",!0)},e.setExpandProperties=function(e){C("setExpandProperties"),I("setExpandProperties",N,e),A(a.SET_EXPAND_PROPERTIES,JSON.stringify(e))},e.setOrientationProperties=function(e){C("setOrientationProperties"),I("setOrientationProperties",p,e),A(a.SET_ORIENTATION_PROPERTIES,JSON.stringify(e))},e.setResizeProperties=function(e){C("setResizeProperties - "+JSON.stringify(e)),I("setResizeProperties",l,e),A(a.SET_RESIZE_PROPERTIES,JSON.stringify(e))},e.storePicture=function(e){C("storePicture"),A(a.STORE_PICTURE,e)},e.supports=function(e){return C("supports - "+e+" : "+(!0===f[e])),!0===f[e]},e.useCustomClose=function(e){C("useCustomClose"),N.useCustomClose=e,A(a.SET_EXPAND_PROPERTIES,JSON.stringify(N))},e.setState=function(t){C("setState ("+t+")"),c!=t&&(c=t,e.fireEvent(r.STATE_CHANGE,c))},e.fireEvent=function(e,t){C("fire event ("+e+")"),E.containsEvent(e)&&E.invoke(e,t)},e.setSupports=function(e,t){C("set feature "+e+" "+t),f[e]=t},e.setPlacementType=function(e){e!=i.INLINE&&e!=i.INTERSTITIAL||(u=e)},e.setCurrentPosition=function(e){C("set current position "+JSON.stringify(e)),T=e},e.setDefaultPosition=function(e){C("set default position "+JSON.stringify(e)),P=e},e.setMaxSize=function(e){C("set max size "+JSON.stringify(e)),S=e},e.setScreenSize=function(e){C("set screen size - "+JSON.stringify(e)),R=e},e.setVersion=function(e){C("set version - "+e),O=e},e.setIsViewable=function(e){C("set is viewable - "+e),d=e},e.setCurrentAppOrientation=function(e){C("setCurrentAppOrientation - "+JSON.stringify(e)),I("setCurrentAppOrientation",g,e),A(a.SET_CURRENT_APP_ORIENTATION,JSON.stringify(e))},e.setLocation=function(e){C("setLocation - "+JSON.stringify(e)),h=e},E.invoke=function(e,t){E[e].forEach((function(i){switch(e){case r.READY:i();break;case r.STATE_CHANGE:i(t);break;case r.SIZE_CHANGE:i(t.width,t.height);break;case r.VIEWABLE_CHANGE:case r.ERROR:i(t);break;case r.AUDIO_VOLUME_CHANGE:i(t.volumePercentage);break;case r.EXPOSURE_CHANGE:i(t.exposedPercentage,t.visibleRectangle,t.occlusionRectangles)}}))},E.containsEvent=function(e){return Array.isArray(E[e])},E.containsListener=function(e,t){var i=String(t);return Array.isArray(E[e])&&E[e].forEach((function(e){if(String(e)===i)return!0})),!1},E.removeListener=function(e,t){var i=String(t),n=-1;Array.isArray(E[e])&&E[e].forEach((function(t){String(t)===i&&(C("removing event listener ("+e+")"),n=E[e].indexOf(t))})),n>0&&E[e].splice(n,1)},e.log=function(e){false},e.log("mraid.js loaded")}();
